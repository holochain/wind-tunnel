# Wind Tunnel Summary Visualiser

A tool to take a summary report from a Wind Tunnel scenario run, in JSON format, and turn it into a pretty HTML report with graphs, so you can grok the information more deeply and quickly. It uses the [Handlebars](https://handlebarsjs.com/) template engine.

## Usage

### Command-line tool

The command takes an input JSON file and an output HTML file.

Take a JSON file from stdin and output from stdout to an HTML file:

```bash
npm run generate foo.json foo.html
```

Use an alternative template:

```bash
npm run generate --template my-template.hbs foo.json foo.html
```

## What's in the package

* `cli.js`: A command-line interface for the tool (see [Usage](#usage)). It generates full, styled HTML pages using the library and the page template. Normally you should run this using `npm run generate` to ensure that all the client-side assets are built and ready to be embedded into the HTML.
* `page.hbs`: A template that the CLI tool uses to turn the markup generated by the library into a full HTML page. If you create your own, it must contain the shell of an HTML page with [Handlebars](handlebarsjs.com) expressions. The necessary expressions are:
    * `{{title}}` for the title.
    * `{{> js}}` inside a `<script>` block for the required JS.
    * `{{> css}}` inside a `<style>` block for the optional CSS.
    * `{{{ body }}}` for the contents of the report. Note the triple braces; this ensures the HTML doesn't get re-encoded.
* `src/`: A library to use in your projects. The CLI uses this too.
    * `index.js`: The entry point to the library. It only outputs partial HTML; you'll need to put it into your own full page.
    * `scenarioTransforms.js`: Functions to massage the data into a form ready for the template to use, keyed by the value of the report JSON's `scenario_name` field. At the very least, each known scenario should have a human-readable title and description added to it.
    * `assets/`: Client-side assets.
        * `windTunnel.js`: Required JS for making forms work. Recommended to run this through a bundler using `npm run build`, which will put the bundled output in `dist/windTunnel.js`.
        * `windTunnel.css`: Recommended default CSS for styling widgets.
    * `templates/`: All of the templates for building the HTML.
        * `partials/`: Widgets for the templates.
        * `scenarios/`: Templates for each of the scenario types. The files must be named `<scenario_name>.hbs` and use the _transformed_ data in the corresponding scenario summary JSON (refer to `../scenarioTransforms.js` to see how a summary might have been transformed).
